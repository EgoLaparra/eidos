taxonomy: org/clulab/wm/grammars/taxonomy.yml

vars:
  increase_triggers: "increas|improv|promot|boost|better"
  decrease_triggers: "decreas|cut|phase|deteriorat|reduc|less"

rules:
  #Entities are found with EntityFinder! Not extracted here!


  #Quantifiers
  - import: org/clulab/wm/grammars/quantifiers.yml
    vars:
      rulepriority: "1"

  #Transparent Words
  - import: org/clulab/wm/grammars/transparent.yml
    vars:
      rulepriority: "1"

  #Events
  #Step 1: find the direct attachments of entities (e.g. "small puppies")
  #TODO: make sure the Increase/Decrease are in avoid.yml
  - import: org/clulab/wm/grammars/entityQuantification.yml
    vars:
      rulepriority: "2"
      action: applyAttachment #Should add quantifier to state of entity
      label: Quantification

  #Step 2: Find other entity-modifying events (e.g. "Increase in rainfall")
  - import: org/clulab/wm/grammars/modifiersTemplate.yml
    vars:
      objrulepriority: "4"
      modrulepriority: "3"
      action: applyAttachment #Should add Increase/Decrease to state of entity
      label: Increase
      trigger: ${ increase_triggers }

  - import: org/clulab/wm/grammars/modifiersTemplate.yml
    vars:
      objrulepriority: "4"
      modrulepriority: "3"
      action: applyAttachment #Should add Increase/Decrease to state of entity
      label: Decrease
      trigger: ${ decrease_triggers }

  #Step 3: Find entity-linking events (e.g. "rainfall causes flooding")
  #Acts upon entities
  - import: org/clulab/wm/grammars/causal.yml
    vars:
      rulepriority: "6"
      label: Causal
      trigger: "lead"
      promotion_trigger: ${increase_triggers} | ${decrease_triggers}
      # To handle the syntactic ambiguity of "A is the cause of B" versus "A is the result of B" which have
      # identical syntactic structure, but opposite directions for identifying the cause/effect, we introduce a set
      # of triggers for reversed direction nouns (e.g., "result" and "effect")
      reverse_noun_trigger: "result|effect"
      # results in versus results from
      #action: ? #

  - import: org/clulab/wm/grammars/origin.yml
    vars:
      rulepriority: "6"
      label: Origin
      trigger: "from|for"
      #action: ? #

  - import: org/clulab/wm/grammars/transparentLinkers.yml
    vars:
      rulepriority: "6"
      label: TransparentLink
      trigger: "from"
      #action: ? #